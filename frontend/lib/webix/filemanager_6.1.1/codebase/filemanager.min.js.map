{"version":3,"file":"filemanager.min.js","sources":["../sources/views/actions.js","../sources/types.js","../sources/locale.js","../sources/widgets/filelist.js","../sources/widgets/filemenu.js","../sources/widgets/filetree.js","../sources/widgets/filetable.js","../sources/widgets/fileview.js","../sources/widgets/path.js","../sources/defaults.js","../sources/history.js","../sources/sort.js","../sources/load.js","../sources/path.js","../sources/save.js","../sources/views/modeviews.js","../sources/views/table.js","../sources/views/toggle.js","../sources/views/tree.js","../sources/ui.js","../sources/views/columns.js","../sources/views/collapseall.js","../sources/views/expandall.js","../sources/views/panel.js","../sources/views/search.js","../sources/views/path.js","../sources/views/up.js","../sources/views/forward.js","../sources/views/back.js","../sources/views/menu.js","../sources/views/mainlayout.js","../sources/views/toolbar.js","../sources/views/bodylayout.js","../sources/views/treelayout.js","../sources/views/treetoolbar.js","../sources/views/modes.js","../sources/views/files.js","../sources/views/upload.js","../sources/filemanager.js"],"sourcesContent":["function getData(){\n\treturn [\n\t\t{id: \"copy\", batch: \"item\", method: \"markCopy\",  icon: \"fm-copy\", value: webix.i18n.filemanager.copy},\n\t\t{id: \"cut\", batch: \"item\", method: \"markCut\", icon: \"fm-cut\", value: webix.i18n.filemanager.cut},\n\t\t{id: \"paste\",  method: \"pasteFile\", icon: \"fm-paste\", value: webix.i18n.filemanager.paste},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"create\", method: \"createFolder\", icon: \"fm-folder\", value: webix.i18n.filemanager.create},\n\t\t{id: \"remove\", batch: \"item\", method: \"deleteFile\", icon: \"fm-delete\", value: webix.i18n.filemanager.remove},\n\t\t{id: \"edit\", batch: \"item\", method: \"editFile\",  icon: \"fm-edit\", value: webix.i18n.filemanager.rename},\n\t\t{id: \"upload\", method: \"uploadFile\", event:\"UploadDialog\", icon: \"fm-upload\", value: webix.i18n.filemanager.upload}\n\t];\n}\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar templateName = view.config.templateName;\n\tvar data = getData();\n\n\n\tvar popup = {\n\t\tview: \"filemenu\",\n\t\tid:\"actions\",\n\t\twidth: 200,\n\t\tpadding:0,\n\t\tautofocus: false,\n\t\tcss: \"webix_fmanager_actions\",\n\t\ttemplate: function(obj,common){\n\t\t\tvar name = templateName(obj,common);\n\t\t\tvar icon = obj.icon.indexOf(\"fm-\") == -1?\"fa-\"+obj.icon:obj.icon;\n\t\t\treturn \"<span class='webix_fmanager_icon \"+icon+\"'></span> \"+name+\"\";\n\t\t},\n\t\tdata: data\n\t};\n\n\n\tview.callEvent(\"onViewInit\", [\"actions\", popup]);\n\tview._contextMenu = view.ui(popup);\n\tview.attachEvent(\"onDestruct\",function(){\n\t\tview._contextMenu.destructor();\n\t});\n}\n\nfunction ready(view){\n\tvar menu = view.getMenu();\n\tif(menu){\n\t\tmenu.attachEvent(\"onItemClick\",function(id,e){\n\t\t\tvar obj = this.getItem(id);\n\t\t\tvar method = view[obj.method]||view[id];\n\t\t\tif(method){\n\t\t\t\tvar active = view.getActive();\n\t\t\t\tif(view.callEvent(\"onbefore\"+(obj.event||obj.method||id),[active])){\n\t\t\t\t\tif(!(id==\"upload\" && view.config.legacyUploader)){\n\t\t\t\t\t\tif(view._uploadPopup)\n\t\t\t\t\t\t\tview._uploadPopup.hide();\n\t\t\t\t\t\tmenu.hide();\n\t\t\t\t\t}\n\t\t\t\t\tvar args = [active];\n\t\t\t\t\tif(id==\"upload\"){\n\t\t\t\t\t\te = webix.html.pos(e);\n\t\t\t\t\t\targs.push(e);\n\t\t\t\t\t}\n\t\t\t\t\twebix.delay(function(){\n\t\t\t\t\t\tmethod.apply(view,args);\n\t\t\t\t\t\tview.callEvent(\"onafter\"+(obj.event||obj.method||id),[]);\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\t\tmenu.attachEvent(\"onBeforeShow\",function(e){\n\t\t\tmenu.filter(\"\");\n\t\t\tmenu.hide();\n\t\t\tvar c = menu.getContext();\n\n\t\t\t//context menu over empty area \n\t\t\tif(c && c.obj && !c.id)\n\t\t\t\tc.obj.unselectAll();\n\t\t\t\n\t\t\tif(c && c.obj)\n\t\t\t\treturn c.obj.callEvent(\"onBeforeMenuShow\",[c.id,e]);\n\n\t\t\treturn true;\n\t\t});\n\n\t}\n}\n","// tree type\nwebix.type(webix.ui.tree,{\n\tname: \"FileTree\",\n\tcss: \"webix_fmanager_tree\",\n\tdragTemplate: webix.template(\"#value#\"),\n\ticon:function(obj){\n\t\tvar html = \"\";\n\t\tfor(var i =1; i < obj.$level; i++){\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\n\t\t}\n\t\tif(obj.webix_child_branch && !obj.$count){\n\t\t\thtml += \"<div class='webix_tree_child_branch webix_fmanager_icon webix_tree_close'></div>\";\n\t\t}\n\t\telse if (obj.$count>0){\n\t\t\tif (obj.open)\n\t\t\t\thtml += \"<div class='webix_fmanager_icon webix_tree_open'></div>\";\n\t\t\telse\n\t\t\t\thtml += \"<div class='webix_fmanager_icon webix_tree_close'></div>\";\n\t\t} else\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\n\t\treturn html;\n\t},\n\tfolder:function(obj){\n\t\tif (obj.$count && obj.open)\n\t\t\treturn \"<div class='webix_fmanager_icon webix_folder_open'></div>\";\n\t\treturn \"<div class='webix_fmanager_icon webix_folder'></div>\";\n\t}\n});\n// dataview type\nwebix.type(webix.ui.dataview, {\n\tname:\"FileView\",\n\tcss: \"webix_fmanager_files\",\n\theight: 110,\n\tmargin: 10,\n\twidth: 150,\n\ttemplate: function(obj,common){\n\t\tvar css = \"webix_fmanager_data_icon\";\n\t\tvar name = common.templateName(obj,common);\n\t\treturn \"<div class='webix_fmanager_file'><div class='\"+css+\"'>\"+common.templateIcon(obj,common)+\"</div>\"+name+\"</div>\";\n\t}\n});","// locale values\nwebix.i18n.filemanager = {\n\tactions: \"Actions\",\n\tback: \"Back\",\n\tforward: \"Forward\",\n\tlevelUp: \"Level Up\",\n\tname: \"Name\",\n\tsize: \"Size\",\n\ttype: \"Type\",\n\tdate: \"Date\",\n\tcopy: \"Copy\",\n\tcut: \"Cut\",\n\tpaste: \"Paste\",\n\tupload: \"Upload\",\n\tremove: \"Delete\",\n\tcreate: \"Create Folder\",\n\trename: \"Rename\",\n\tlocation: \"Location\",\n\tselect: \"Select Files\",\n\tsizeLabels: [\"B\",\"KB\",\"MB\",\"GB\"],\n\ticonsView: \"Icons View\",\n\ttableView: \"Table View\",\n\thideTree: \"Hide Tree\",\n\tshowTree: \"Show Tree\",\n\tcollapseTree: \"Collapse Tree\",\n\texpandTree: \"Expand Tree\",\n\tsaving: \"Saving...\",\n\terrorResponse: \"Error: changes were not saved!\",\n\treplaceConfirmation: \"The folder already contains files with such names. Would you like to replace existing files ?\",\n\tcreateConfirmation: \"The folder with such a name already exists. Would you like to replace it ?\",\n\trenameConfirmation: \"The file with such a name already exists. Would you like to replace it ?\",\n\tyes: \"Yes\",\n\tno: \"No\",\n\ttypes:{\n\t\tfolder: \"Folder\",\n\t\tdoc: \"Document\",\n\t\texcel: \"Excel\",\n\t\tpdf: \"PDF\",\n\t\tpp: \"PowerPoint\",\n\t\ttext: \"Text File\",\n\t\tvideo: \"Video File\",\n\t\timage: \"Image\",\n\t\tcode: \"Code\",\n\t\taudio: \"Audio\",\n\t\tarchive: \"Archive\",\n\t\tfile: \"File\"\n\t}\n};\n","webix.protoUI({\n\tname:\"filelist\"\n}, webix.EditAbility, webix.ui.list);","webix.protoUI({\n\tname:\"filemenu\"\n}, webix.ContextHelper, webix.ui.submenu);","// editable Tree\nwebix.protoUI({\n\tname:\"filetree\",\n\t$dragHTML:function(item, pos){\n\t\tvar ctx = webix.DragControl.getContext();\n\t\tvar type = this.type;\n\t\tvar text = type.dragTemplate(item,type);\n\t\tvar size = webix.html.getTextSize(text);\n\t\tvar posView = webix.html.offset(this.$view);\n\t\tvar offset = pos.x - posView.x;\n\t\tctx.x_offset = offset > size.width? - size.width/4 : -offset;\n\t\tctx.y_offset = - size.height/2;\n\t\treturn \"<div class='webix_tree_item webix_fmanager_drag' style='width:auto'>\"+text+\"</div>\";\n\t}\n}, webix.EditAbility, webix.ui.tree);","// Datatable with customized drag element\nwebix.protoUI({\n\tname:\"filetable\",\n\t$dragHTML:function(item, pos){\n\t\tvar ctx = webix.DragControl.getContext();\n\t\tvar index = this.getColumnIndex(\"value\");\n\t\tvar text = this.config.columns[index].template(item,this.type);\n\t\tvar size = webix.html.getTextSize(text);\n\n\t\tvar posView = webix.html.offset(this.$view);\n\t\tvar offset = pos.clientX - posView.x;\n\t\t\n\t\tctx.x_offset = offset > size.width? - size.width/4 : -offset;\n\t\tctx.y_offset = - size.height/2;\n\n\t\tvar html=\"<div class='webix_dd_drag webix_fmanager_drag' >\";\n\t\thtml += \"<div style='width:\"+(size.width+40)+\"px'>\"+ text+\"</div>\";\n\t\treturn html+\"</div>\";\n\t}\n}, webix.ui.datatable);","// editable Dataview\nwebix.protoUI({\n\tname:\"fileview\"\n}, webix.EditAbility, webix.ui.dataview);","// a new view for path display, based on List view\nwebix.protoUI({\n\tname: \"path\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tseparator: \",\",\n\t\tscroll: false\n\t},\n\t$skin:function(){\n\t\tthis.type.height = webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight;\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_path\";\n\t},\n\tvalue_setter: function(value){\n\t\tthis.setValue();\n\t\treturn \tvalue;\n\t},\n\tsetValue: function(values){\n\t\tthis.clearAll();\n\t\tif(values){\n\t\t\tif(typeof(values) == \"string\"){\n\t\t\t\tvalues = values.split(this.config.separator);\n\t\t\t}\n\t\t\tthis.parse(webix.copy(values));\n\t\t}\n\t},\n\tgetValue: function(){\n\t\treturn this.serialize();\n\t}\n},webix.ui.list);","export const values = {\n\tmodes: [\"files\",\"table\"],\n\tmode: \"table\",\n\thandlers: {},\n\tstructure:{},\n\tfsIds: true,\n\ttemplateName: webix.template(\"#value#\"),\n\ttemplateSize: function(obj){\n\t\tvar value = obj.size;\n\t\tvar labels = webix.i18n.filemanager.sizeLabels;\n\t\tvar pow = 0;\n\t\twhile(value/1024 >1){\n\t\t\tvalue = value/1024;\n\t\t\tpow++;\n\t\t}\n\t\tvar isInt = (parseInt(value,10) == value);\n\n\t\tvar format = webix.Number.numToStr({\n\t\t\tdecimalDelimiter:webix.i18n.decimalDelimiter,\n\t\t\tgroupDelimiter:webix.i18n.groupDelimiter,\n\t\t\tdecimalSize : isInt?0:webix.i18n.groupSize\n\t\t});\n\n\t\treturn format(value)+\"\"+labels[pow];\n\t},\n\ttemplateType: function(obj){\n\t\tvar types = webix.i18n.filemanager.types;\n\t\treturn types&&types[obj.type]?types[obj.type]:obj.type;\n\t},\n\ttemplateDate: function(obj){\n\t\tvar date = obj.date;\n\t\tif(typeof(date) != \"object\"){\n\t\t\tdate = new Date(parseInt(obj.date,10)*1000);\n\t\t}\n\t\treturn webix.i18n.fullDateFormatStr(date);\n\t},\n\ttemplateCreate: function(){\n\t\treturn {value: \"newFolder\", type: \"folder\", date: new Date()};\n\t},\n\ttemplateIcon: function(obj,common){\n\t\treturn \"<div class='webix_fmanager_icon fm-\"+(common.icons[obj.type]||common.icons.file)+\"'></div>\";\n\t},\n\tuploadProgress: {\n\t\ttype:\"icon\",\n\t\thide:false\n\t},\n\t//idChange: true,\n\ticons: {\n\t\tfolder: \"folder\",\n\t\texcel: \"file-excel\",\n\t\tpdf: \"file-pdf\",\n\t\tpp: \"file-powerpoint\",\n\t\ttext: \"file-text\",\n\t\tvideo: \"file-video\",\n\t\timage: \"file-image\",\n\t\tcode: \"file-code\",\n\t\taudio: \"file-audio\",\n\t\tarchive: \"file-archive\",\n\t\tdoc: \"file-word\",\n\t\tfile: \"file\"\n\t}\n};","export function init(view){\n\tview._cursorHistory = webix.extend([],webix.PowerArray,true);\n\tview.$ready.push(()=>setHandlers(view));\n}\n\nfunction setHandlers(view){\n\tview.attachEvent(\"onAfterLoad\",function(){\n\t\tif(!view.config.disabledHistory){\n\t\t\tvar state = window.location.hash;\n\t\t\tif (state && state.indexOf(\"#!/\") === 0){\n\t\t\t\tview.setPath(state.replace(\"#!/\",\"\"));\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterCursorChange\", function(id){\n\t\tif(!view._historyIgnore){\n\t\t\tif(!view._historyCursor )\n\t\t\t\tview._cursorHistory.splice(1);\n\t\t\tif(view._cursorHistory[this._historyCursor] != id){\n\t\t\t\tif(view._cursorHistory.length==20)\n\t\t\t\t\tview._cursorHistory.splice(0,1);\n\t\t\t\tview._cursorHistory.push(id);\n\t\t\t\tview._historyCursor = this._cursorHistory.length-1;\n\t\t\t}\n\t\t}\n\t\tview._historyIgnore = false;\n\t\tif(!view.config.disabledHistory)\n\t\t\tpushHistory(view, id);\n\t\tview.callEvent(\"onHistoryChange\",[id, view._cursorHistory,view._historyCursor]);\n\t});\n}\n\nfunction pushHistory(view,path){\n\tpath = path||view.getCursor();\n\n\tif(window.history && window.history.replaceState){\n\t\twindow.history.replaceState({ webix:true, id:view.config.id, value:path }, \"\", \"#!/\"+path);\n\t}\n\telse{\n\t\twindow.location.hash =  \"#!/\"+path;\n\t}\n}\n\nexport function changeCursor(view, step){\n\tif(view._cursorHistory.length>1){\n\t\tvar index = view._historyCursor + step;\n\t\tif(index>-1 && index < view._cursorHistory.length){\n\t\t\tview._historyIgnore = true;\n\t\t\tview._historyCursor = index;\n\t\t\tview.setCursor(view._cursorHistory[index]);\n\t\t}\n\t}\n\treturn view.getCursor();\n}","export function sortData(sort, data){\n\tvar sorter = webix.DataStore.prototype.sorting.create(sort);\n\tvar folders = [];\n\tvar files = [];\n\tfor(var i =0; i < data.length; i++){\n\t\tif(data[i].type == \"folder\")\n\t\t\tfolders.push(data[i]);\n\t\telse\n\t\t\tfiles.push(data[i]);\n\t}\n\tfolders.sort(sorter);\n\tfiles.sort(sorter);\n\treturn folders.concat(files);\n}","import * as sorting from \"./sort\";\n\nexport function init(view){\n\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\tview.$skipDynLoading = false;\n\t\treturn true;\n\t});\n\tsetDataParsers(view);\n}\n\nfunction setDataParsers(view){\n\tview.dataParser = {\n\t\tfiles: function(obj, data){\n\t\t\tif(this.config.noFileCache){\n\t\t\t\tclearBranch(this, obj.id);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj.webix_files = 0;\n\n\t\t\tparseData(this, data);\n\t\t},\n\t\tbranch : function(obj, data){\n\t\t\tif(this.config.noFileCache){\n\t\t\t\tclearBranch(this, obj.id);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tobj.webix_branch = 0;\n\t\t\t\tobj.webix_child_branch = 0;\n\t\t\t}\n\n\t\t\tparseData(this, data);\n\t\t}\n\t};\n}\nexport function loadDynData(view, url, obj, mode, open){\n\tview.showProgress();\n\tif(view.callEvent(\"onBeforeDynLoad\", [url, obj, mode, open])){\n\t\tvar callback = {\n\t\t\tsuccess: function(text,response){\n\t\t\t\tview.hideProgress();\n\t\t\t\tvar data = view.data.driver.toObject(text, response);\n\t\t\t\tif(open)\n\t\t\t\t\tobj.open = true;\n\n\t\t\t\tif(view.callEvent(\"onBeforeDynParse\", [obj, data, mode])){\n\t\t\t\t\tview.dataParser[mode].call(view, obj, data);\n\t\t\t\t\tview.callEvent(\"onAfterDynParse\", [obj, data, mode]);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(){\n\t\t\t\tview.hideProgress();\n\t\t\t\tview.callEvent(\"onDynLoadError\",[]);\n\t\t\t}\n\t\t};\n\t\tif (url.load)\n\t\t\treturn url.load(null, callback, { action: mode, source: obj.id});\n\t}\n}\n\nexport function clearBranch(view, id){\n\tvar items = [];\n\n\tview.data.eachChild(id,function(item){\n\t\tif(!view.data.branch[item.id] && item.type != \"folder\")\n\t\t\titems.push(item.id);\n\t},view,true);\n\n\tfor(var i=0; i< items.length; i++){\n\t\tview.remove(items[i]);\n\t}\n}\n\nexport function parseData(view, data){\n\tview.parse(data);\n\tview.$skipDynLoading = true;\n\tview._refreshActiveFolder();\n\tview.$skipDynLoading = false;\n}\n\nexport function openFolders(view, folders){\n\tvar dynMode, i, pItem;\n\tvar defer = webix.promise.defer();\n\tdynMode = getDynMode(view);\n\n\tif(dynMode && folders.length){\n\t\tfor(i =0; i < folders.length; i++){\n\t\t\tpItem = view.getItem(folders[i]);\n\t\t\tif(!(pItem && !pItem[\"webix_\" + dynMode])){\n\t\t\t\topenDynFolder(view,folders.slice(i), dynMode, defer);\n\t\t\t\treturn defer;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpItem.open = true;\n\t\t\t\tif(view.$$(\"tree\"))\n\t\t\t\t\tview.$$(\"tree\").refresh(folders[i]);\n\t\t\t}\n\t\t}\n\t\tdefer.resolve(folders[i]);\n\t}\n\telse{\n\t\tdefer.reject();\n\t}\n\treturn defer;\n}\nfunction openDynFolder(view,ids, mode, defer){\n\tvar obj = view.getItem(ids[0]);\n\tview.showProgress();\n\tvar url = view.config.handlers[mode];\n\tvar callback = {\n\t\tsuccess: function(text,response){\n\t\t\tview.hideProgress();\n\t\t\tvar data = view.data.driver.toObject(text, response);\n\t\t\tif(view.callEvent(\"onBeforeDynParse\", [obj, data, mode])){\n\t\t\t\tobj.open = true;\n\t\t\t\tview.dataParser[mode].call(view, obj, data);\n\n\t\t\t\tvar lastId = ids.shift();\n\t\t\t\tif(ids.length && view.getItem(ids[0]).type == \"folder\"){\n\t\t\t\t\topenDynFolder(view,ids, mode, defer);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tview.refreshCursor();\n\t\t\t\t\tdefer.resolve(lastId);\n\t\t\t\t}\n\t\t\t\tview.callEvent(\"onAfterDynParse\", [obj, data, mode]);\n\t\t\t}\n\n\t\t}\n\t};\n\tif (url.load)\n\t\treturn url.load(null, callback,  { action: mode, source: ids[0]});\n}\n\nexport function getDynMode(view){\n\tfor(var mode in view.dataParser){\n\t\tif (view.config.handlers[mode]) {\n\t\t\treturn mode;\n\t\t}\n\t}\n\treturn null;\n}\nexport function loadSearchData(view, url, id, value){\n\tvar params =  { action:\"search\", source: id, text: value};\n\tif(view.callEvent(\"onBeforeSearchRequest\",[id, params])){\n\t\tvar callback = {\n\t\t\tsuccess: function(text,response){\n\t\t\t\tview.hideProgress();\n\t\t\t\tvar data = view.data.driver.toObject(text, response);\n\t\t\t\tparseSearchData(view, data);\n\t\t\t\tview.$searchValue = value;\n\t\t\t},\n\t\t\terror:function(){\n\t\t\t\tview.hideProgress();\n\t\t\t}\n\t\t};\n\t\tif (url.load)\n\t\t\treturn url.load(null, callback, params);\n\t}\n}\nexport function parseSearchData(view, data){\n\tview.callEvent(\"onShowSearchResults\",[]);\n\tview.$searchResults = true;\n\tvar cell = view.$$(view.config.mode);\n\tif(cell && cell.filter){\n\t\tcell.clearAll();\n\t\tif(view.sortState && view.sortState.view == cell.config.id)\n\t\t\tdata = sorting.sortData(view.sortState.sort, data);\n\t\tcell.parse(data);\n\t}\n}\n\n","export function getPath(view, id){\n\tid = id||view.getCursor();\n\tvar path = [];\n\twhile(id && view.getItem(id)){\n\t\tpath.push(id);\n\t\tid = view.getParentId(id);\n\t}\n\treturn path.reverse();\n}\n\nexport function getPathNames(view, id){\n\tid = id||view.getCursor();\n\tvar item = null;\n\tvar path = [];\n\twhile(id && view.getItem(id)){\n\t\titem = view.getItem(id);\n\t\tpath.push({id:id, value:view.config.templateName(item)});\n\t\tid = view.getParentId(id);\n\t}\n\treturn path.reverse();\n}\n\n\nexport function setPath(view, id){\n\tvar pId = id;\n\twhile(pId && view.getItem(pId)){\n\t\tview.callEvent(\"onPathLevel\",[pId]);\n\t\tpId = view.getParentId(pId);\n\t}\n\tif(view.getItem(id)){\n\t\tif(id!= view.getCursor()){\n\t\t\tview.setCursor(id);\n\t\t\tview.callEvent(\"onPathComplete\",[id]);\n\t\t}\n\n\t}else{\n\t\t// dynamic loading\n\t\tvar folders = getParentFolders(id);\n\t\tview.openFolders(folders).then(function(){\n\t\t\tview.setCursor(id);\n\t\t\tview.callEvent(\"onPathComplete\",[id]);\n\t\t});\n\t}\n\n}\n\nexport function getParentFolders(id){\n\tvar i, parts,\n\t\tids = [];\n\tif(typeof id == \"string\"){\n\t\tparts = id.replace(/^\\//,\"\").split(\"/\");\n\t\tfor(i=0; i< parts.length; i++){\n\t\t\tids.push(parts.slice(0, i+1).join(\"/\"));\n\t\t}\n\t}\n\treturn ids;\n}","export function makeSaveRequest(view, url,obj,callback){\n\tif(view.callEvent(\"onBeforeRequest\",[url, obj])){\n\t\tshowSaveMessage(view);\n\t\tif(url.load){\n\t\t\tvar rCallback = {\n\t\t\t\tsuccess: function(text,response){\n\t\t\t\t\tvar data = view.data.driver.toObject(text, response);\n\t\t\t\t\thideSaveMessage(view);\n\t\t\t\t\tif(view.callEvent(\"onSuccessResponse\",[obj,data]) && callback){\n\t\t\t\t\t\tcallback.call(view,obj,data);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(result){\n\t\t\t\t\tif(view.callEvent(\"onErrorResponse\", [obj,result])){\n\t\t\t\t\t\terrorHandler(view, result);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\turl.load(null, rCallback, webix.copy(obj));\n\t\t}\n\t}\n}\n\nfunction showSaveMessage(view, message){\n\tview._saveMessageDate = new Date();\n\tif (!view._saveMessage){\n\t\tview._saveMessage = webix.html.create(\"DIV\",{ \"class\":\"webix_fmanager_save_message\"},\"\");\n\t\tview.$view.style.position = \"relative\";\n\t\twebix.html.insertBefore(view._saveMessage, view.$view);\n\t}\n\tvar msg = \"\";\n\tif (!message) {\n\t\tmsg = webix.i18n.filemanager.saving;\n\t} else{\n\t\tmsg = webix.i18n.filemanager.errorResponse;\n\t}\n\n\tview._saveMessage.innerHTML = msg;\n}\n\nfunction hideSaveMessage(view){\n\tif (view._saveMessage){\n\t\twebix.html.remove(view._saveMessage);\n\t\tview._saveMessage = null;\n\t}\n}\n\nexport function errorHandler(view){\n\t// reload data on error response\n\tvar url = view.data.url;\n\tif(url){\n\t\tvar driver = view.data.driver;\n\t\tshowSaveMessage(view, true);\n\n\t\twebix.ajax().get(url, {success:function(text, response){\n\t\t\tvar data = driver.toObject(text, response);\n\t\t\tif (data){\n\t\t\t\tdata = driver.getDetails(driver.getRecords(data));\n\t\t\t\tview.clearAll();\n\t\t\t\tview.parse(data);\n\t\t\t\tview.data.url = url;\n\t\t\t}\n\t\t},error:function(){}});\n\t}\n}","import * as sorting from \"../sort\";\n\nexport function init(view, settings){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tanimate: false,\n\t\tcells: (settings.modes?webix.copy(settings.modes):[])\n\t};\n}\n\nfunction ready(view){\n\tvar i, mCell,\n\t\tcell = view.$$(view.config.mode),\n\t\tmodes = view.config.modes;\n\n\tif(cell){\n\t\tcell.show();\n\t\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\t\tvar cell = view.$$(view.config.mode);\n\t\t\tif(cell)\n\t\t\t\tcell.unselect();\n\t\t\treturn true;\n\t\t});\n\t\tview.attachEvent(\"onAfterCursorChange\", function(){\n\t\t\tvar cell = view.$$(view.config.mode);\n\t\t\tif(cell)\n\t\t\t\tcell.editStop();\n\t\t});\n\t}\n\n\tif(modes){\n\t\tfor(i =0; i < modes.length; i++) {\n\t\t\tmCell = view.$$(modes[i]);\n\t\t\tif (mCell && mCell.filter) {\n\t\t\t\taddCellConfig(view, mCell);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction addCellConfig(view, cell){\n\tbindData(view, cell);\n\tapplyTemplates(view, cell);\n\tsetCellHandlers(view, cell);\n\t// link with context menu\n\tvar menu = view.getMenu();\n\tif (menu && !view.config.readonly)\n\t\taddMenuHandlers(view, cell, menu);\n\t//read-only\n\tif(view.config.readonly){\n\t\tcell.define(\"drag\",false);\n\t\tcell.define(\"editable\",false);\n\t}\n}\n\nfunction bindData(view, cell){\n\tview.data.attachEvent(\"onClearAll\", () => cell.clearAll());\n\n\tview.data.attachEvent(\"onIdChange\",(oldId,newId) => {\n\t\tif(cell.data.pull[oldId])\n\t\t\tcell.data.changeId(oldId,newId);\n\t});\n\n\t// we do not need call binding on row selection\n\tcell.attachEvent(\"onBeforeSelect\", function(){\n\t\tcell.$skipBinding = true;\n\t});\n\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\tcell.$skipBinding = false;\n\t});\n\tview.attachEvent(\"onAfterCursorChange\", function(){\n\t\tcell.$skipBinding = false;\n\t});\n\tcell.bind(view, \"$data\", (obj, source) => {\n\t\tvar url;\n\t\tif(cell.$skipBinding)\n\t\t\treturn false;\n\t\tif (!obj) return cell.clearAll();\n\n\t\tif (!view.$searchResults) {\n\t\t\tif(!view.$skipDynLoading){\n\t\t\t\tfor(var mode in view.dataParser){\n\t\t\t\t\tif(!url && obj[\"webix_\"+mode]) {\n\t\t\t\t\t\turl = view.config.handlers[mode];\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\tview.$skipDynLoading = true;\n\t\t\t\t\t\t\tview.loadDynData(url, obj, mode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// import child items\n\t\t\timportSelectedBranch(view, cell, source, obj);\n\t\t}\n\t});\n}\n\nfunction importSelectedBranch(view, target, source, obj){\n\tvar data = [].concat(webix.copy(source.data.getBranch(obj.id))).concat(obj.files || []);\n\tif(view.sortState && view.sortState.view == target.config.id)\n\t\tdata = sorting.sortData(view.sortState.sort, data);\n\ttarget.data.importData(data, true);\n}\n\n\n\nfunction applyTemplates(view, cell){\n\tcell.type.icons = view.config.icons;\n\tcell.type.templateIcon = view.config.templateIcon;\n\tcell.type.templateName = view.config.templateName;\n\tcell.type.templateSize = view.config.templateSize;\n\tcell.type.templateDate = view.config.templateDate;\n\tcell.type.templateType = view.config.templateType;\n}\n\nfunction addMenuHandlers(view,cell,menu){\n\tcell.on_context.webix_view = function(e,id){\n\t\tid = this.locate(e.target|| e.srcElement);\n\t\tif(!id){\n\t\t\tif(menu.setContext)\n\t\t\t\tmenu.setContext({ obj:webix.$$(e)});\n\t\t\tmenu.show(e);\n\t\t\twebix.html.preventEvent(e);\n\t\t}\n\n\t};\n\tmenu.attachTo(cell);\n\n\tcell.attachEvent(\"onBeforeMenuShow\", function () {\n\t\tvar context = menu.getContext();\n\t\tvar type = \"\";\n\t\tif (context.id)\n\t\t\ttype = view.getItem(context.id).type === \"folder\" ? \"folder\" : \"file\";\n\n\t\tmenu.filter(function(obj){\n\t\t\tvar res = true;\n\n\t\t\tif (obj.batch){\n\t\t\t\tif(!type){\n\t\t\t\t\tres = (obj.batch == \"empty\");\n\t\t\t\t} else {\n\t\t\t\t\tres = (obj.batch == type || obj.batch == \"item\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(view.config.menuFilter)\n\t\t\t\tres =  res && view.config.menuFilter(obj);\n\n\t\t\treturn res;\n\t\t});\n\n\t\tif(menu.count() && context.id){\n\t\t\twebix.UIManager.setFocus(this);\n\t\t\tvar sel = this.getSelectedId();\n\t\t\tvar found = false;\n\t\t\tif(webix.isArray(sel)){\n\t\t\t\tfor(var i =0; !found && i < sel.length; i++){\n\t\t\t\t\tif(\"\"+sel[i] == \"\"+context.id)\n\t\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!found && this.exists(context.id))\n\t\t\t\tthis.select(context.id);\n\t\t}\n\n\t\treturn menu.count()>0;\n\t});\n\n\tcell.attachEvent(\"onAfterMenuShow\", function (id) {\n\t\tif(id){\n\t\t\tvar selected = this.getSelectedId(true);\n\t\t\tvar isSelected = false;\n\t\t\tfor (var i = 0; ( i < selected.length) && !isSelected; i++) {\n\t\t\t\tif (selected[i].toString() == id.toString()) {\n\t\t\t\t\tisSelected = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isSelected)\n\t\t\t\tthis.select(id.toString());\n\n\t\t\twebix.UIManager.setFocus(this);\n\t\t}\n\t\telse{\n\t\t\tthis.unselect();\n\t\t}\n\t});\n}\nfunction setCellHandlers(view, cell){\n\n\tcell.attachEvent(\"onAfterSelect\", (id) => {\n\t\tif(view.getItem(id))\n\t\t\tview.callEvent(\"onItemSelect\",[id]);\n\t});\n\n\t// double-click handlers\n\tcell.attachEvent(\"onItemDblClick\", function(id) {\n\t\tview._onFileDblClick(id);\n\t});\n\n\t// focus and blur styling\n\tview._addElementHotKey(\"tab\", function(cell){\n\t\tif (!cell.getSelectedId()) {\n\t\t\tvar id = cell.getFirstId();\n\t\t\tif (id){\n\t\t\t\tcell.select(id);\n\t\t\t}\n\t\t}\n\t},cell);\n\tcell.attachEvent(\"onFocus\", function(){\n\t\tview._activeView = this;\n\t\twebix.html.removeCss(this.$view, \"webix_blur\");\n\t});\n\tcell.attachEvent(\"onBlur\", function() {\n\t\tif (!view.getMenu() || !view.getMenu().isVisible())\n\t\t\twebix.html.addCss(cell.$view, \"webix_blur\");\n\t});\n\n\t// editing (rename)\n\tcell.attachEvent(\"onBeforeEditStop\", function (state, editor) {\n\t\treturn this.getTopParentView().callEvent(\"onBeforeEditStop\", [editor.id || editor.row, state, editor, this]);\n\t});\n\tcell.attachEvent(\"onAfterEditStop\", function (state, editor) {\n\t\tvar view = this.getTopParentView();\n\t\tif (view.callEvent(\"onAfterEditStop\", [editor.id || editor.row, state, editor, this])) {\n\t\t\tif(!editor.column || editor.column == \"value\")\n\t\t\t\tview.renameFile(editor.id || editor.row, state.value);\n\t\t\telse if(editor.column){\n\t\t\t\tview.getItem(editor.id || editor.row)[editor.column] = state.value;\n\t\t\t}\n\t\t}\n\t});\n\n\t// drag-n-drop\n\tcell.attachEvent(\"onBeforeDrop\", function (context, e) {\n\t\tif (view.callEvent(\"onBeforeDrop\", [context])) {\n\t\t\tif (context.from) {    //from different component\n\t\t\t\tview.moveFile(context.source, context.target);\n\t\t\t\tview.callEvent(\"onAfterDrop\",[context,e]);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\tcell.attachEvent(\"onBeforeDrag\", function (context, e) {\n\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDrag\", [context, e]);\n\t});\n\tcell.attachEvent(\"onBeforeDragIn\", function (context, e) {\n\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDragIn\", [context, e]);\n\t});\n\n\t// enter hot key\n\tview._addElementHotKey(\"enter\", function (sview) {\n\t\tvar selected = sview.getSelectedId(true);\n\t\tfor (var i = 0; i < selected.length; i++) {\n\t\t\tview._onFileDblClick(selected[i]);\n\t\t}\n\t\twebix.UIManager.setFocus(sview);\n\t\tselected = sview.getSelectedId(true);\n\t\tif (!selected.length) {\n\t\t\tvar id0 = sview.getFirstId();\n\t\t\tif (id0)\n\t\t\t\tsview.select(id0);\n\t\t}\n\t}, cell);\n\n\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview: \"filetable\",\n\t\tcss: \"webix_fmanager_table\",\n\t\tcolumns: \"columns\",\n\t\theaderRowHeight: 34,\n\t\teditable: true,\n\t\teditaction: false,\n\t\tselect: \"multiselect\",\n\t\tdrag: true,\n\t\tnavigation: true,\n\t\tresizeColumn:true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"table\")){\n\t\tview.attachEvent(\"onHideSearchResults\", function(){\n\t\t\tif(view.$$(\"table\").isColumnVisible(\"location\"))\n\t\t\t\tview.$$(\"table\").hideColumn(\"location\");\n\t\t});\n\t\tview.attachEvent(\"onShowSearchResults\", function(){\n\t\t\tif(!view.$$(\"table\").isColumnVisible(\"location\"))\n\t\t\t\tview.$$(\"table\").showColumn(\"location\");\n\t\t});\n\n\t\tview.$$(\"table\").attachEvent(\"onBeforeEditStart\", function(id){\n\t\t\tif(typeof(id) != \"object\"){\n\t\t\t\tthis.edit({row:id,column: \"value\"});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\t// sorting\n\t\tview.$$(\"table\").data.attachEvent(\"onBeforeSort\", function(by, dir, as, sort){\n\t\t\tview.sortState = {\n\t\t\t\tview:  view.$$(\"table\").config.id,\n\t\t\t\tsort: sort\n\t\t\t};\n\t\t\tif(view.$searchResults && view.$$(\"search\")){\n\t\t\t\tview.showSearchResults(view.$$(\"search\").getValue());\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tview.data.attachEvent(\"onClearAll\", function(){\n\t\t\tview.sortState = null;\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_toggle\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\ttooltip: webix.i18n.filemanager.hideTree\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"hideTree\")){\n\t\tview.$$(\"hideTree\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.hideTree();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\twidth: 251,\n\t\tview: \"filetree\",\n\t\tid: \"tree\",\n\t\tselect: true,\n\t\tfilterMode:{\n\t\t\tshowSubItems:false,\n\t\t\topenParents:false\n\t\t},\n\t\ttype: \"FileTree\",\n\t\tnavigation: true,\n\t\teditor:\"text\",\n\t\teditable: true,\n\t\teditaction: false,\n\t\tdrag: true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\nfunction ready(view){\n\tvar tree = view.$$(\"tree\");\n\tvar state;\n\n\tif(tree){\n\n\n\t\ttree.type.icons = view.config.icons;\n\n\t\t// data source definition (syncing with main data source)\n\t\ttree.sync(view,function(){\n\t\t\tthis.filter(function(obj){\n\n\t\t\t\treturn (obj.$count||obj.type==\"folder\");\n\t\t\t});\n\t\t});\n\n\t\ttree.on_click.webix_tree_child_branch = function(ev, id){\n\t\t\tvar url = view.config.handlers.branch;\n\t\t\tif(url){\n\t\t\t\tview.loadDynData(url, this.getItem(id), \"branch\", true);\n\t\t\t}\n\t\t};\n\n\t\tview.attachEvent(\"onBeforeDynParse\", function(){\n\t\t\tstate = tree.getState();\n\t\t});\n\n\t\tview.attachEvent(\"onAfterDynParse\", function(obj,data,mode){\n\t\t\tif(state){\n\t\t\t\ttree.setState(state);\n\t\t\t\tstate = null;\n\t\t\t}\n\t\t\tif(mode == \"branch\" && obj.open){\n\t\t\t\ttree.open(obj.id);\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onAfterSelect\", function(id){\n\t\t\tview.callEvent(\"onFolderSelect\",[id]);\n\t\t});\n\n\t\tview.attachEvent(\"onAfterCursorChange\", function(id){\n\t\t\tif (id){\n\t\t\t\ttree.select(id);\n\t\t\t\ttree.showItem(id);\n\t\t\t}\n\t\t});\n\n\t\t// hide search results on click\n\t\ttree.attachEvent(\"onItemClick\",function(){\n\t\t\tif(view.$searchResults){\n\t\t\t\tview.hideSearchResults();\n\t\t\t}\n\t\t});\n\n\t\tview.attachEvent(\"onItemRename\", function(id){\n\t\t\ttree.refresh(id);\n\t\t});\n\n\t\t// open/close on double-click\n\t\ttree.attachEvent(\"onItemDblClick\",function(id){\n\t\t\tif(this.isBranchOpen(id)){\n\t\t\t\tthis.close(id);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.open(id);\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onBlur\",function(){\n\t\t\tif(!view.getMenu()||!view.getMenu().isVisible()){\n\t\t\t\twebix.html.addCss(this.$view,\"webix_blur\");\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onFocus\",function(){\n\t\t\tview._activeView = tree;\n\t\t\twebix.html.removeCss(tree.$view,\"webix_blur\");\n\t\t\t// clear sub view selection\n\t\t\tview.$$(view.config.mode).unselect();\n\t\t});\n\n\n\t\t// setting path (history support)\n\t\tview.attachEvent(\"onPathComplete\",function(id){\n\t\t\ttree.showItem(id);\n\t\t});\n\n\t\t// context menu\n\t\tif(!view.config.readonly){\n\t\t\tif(view.getMenu())\n\t\t\t\tview.getMenu().attachTo(tree);\n\t\t\ttree.attachEvent(\"onBeforeMenuShow\",function(id){\n\t\t\t\tvar menu = view.getMenu();\n\n\t\t\t\tvar context = menu.getContext();\n\t\t\t\tvar type = \"\";\n\t\t\t\tif (context.id && this.getParentId(context.id))\n\t\t\t\t\ttype = view.getItem(context.id).type === \"folder\" ? \"folder\" : \"file\";\n\n\t\t\t\tmenu.filter(function(obj){\n\t\t\t\t\tvar res = true;\n\n\t\t\t\t\tif (obj.batch){\n\t\t\t\t\t\tif(!type){\n\t\t\t\t\t\t\tres = (obj.batch == \"empty\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres = (obj.batch == type || obj.batch == \"item\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(view.config.menuFilter)\n\t\t\t\t\t\tres =  res && view.config.menuFilter(obj);\n\n\t\t\t\t\treturn res;\n\t\t\t\t});\n\t\t\t\tthis.select(id);\n\t\t\t\twebix.UIManager.setFocus(this);\n\t\t\t\treturn menu.count()>0;\n\t\t\t});\n\t\t}\n\n\t\t// editing (rename)\n\t\ttree.attachEvent(\"onBeforeEditStop\",function(state,editor){\n\t\t\treturn view.callEvent(\"onBeforeEditStop\",[editor.id,state,editor,tree]);\n\t\t});\n\t\ttree.attachEvent(\"onAfterEditStop\",function(state,editor){\n\t\t\tif(view.callEvent(\"onAfterEditStop\",[editor.id,state,editor,tree])){\n\t\t\t\tview.renameFile(editor.id,state.value);\n\t\t\t}\n\t\t});\n\n\t\t// drag-n-drop\n\t\ttree.attachEvent(\"onBeforeDrag\",function(context,e){\n\t\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDrag\",[context,e]);\n\t\t});\n\t\ttree.attachEvent(\"onBeforeDragIn\",function(context,e){\n\t\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDragIn\",[context,e]);\n\t\t});\n\t\ttree.attachEvent(\"onBeforeDrop\",function(context,e){\n\t\t\tif(view.callEvent(\"onBeforeDrop\",[context,e])){\n\t\t\t\tif (context.from){\t//from different component\n\t\t\t\t\tview.moveFile(context.source, context.target);\n\t\t\t\t\tview.callEvent(\"onAfterDrop\",[context,e]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\t// focus\n\t\tvar setTreeCursor = function(){\n\t\t\tif(tree)\n\t\t\t\twebix.UIManager.setFocus(tree);\n\t\t};\n\t\tview.attachEvent(\"onAfterBack\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterForward\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterLevelUp\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterPathClick\",setTreeCursor);\n\n\t\t// read-only mode\n\t\tif(view.config.readonly){\n\t\t\ttree.define(\"drag\",false);\n\t\t\ttree.define(\"editable\",false);\n\t\t}\n\t}\n}","import * as back from \"./views/back\";\nimport * as bodyLayout from \"./views/bodylayout\";\nimport * as collapse from \"./views/collapseall\";\nimport * as columns from \"./views/columns\";\nimport * as expand from \"./views/expandall\";\nimport * as files from \"./views/files\";\nimport * as forward from \"./views/forward\";\nimport * as mainLayout from \"./views/mainlayout\";\nimport * as menu from \"./views/menu\";\nimport * as modes from \"./views/modes\";\nimport * as modeViews from \"./views/modeviews\";\nimport * as path from \"./views/path\";\nimport * as search from \"./views/search\";\nimport * as sidePanel from \"./views/panel\";\nimport * as table from \"./views/table\";\nimport * as treeLayout from \"./views/treelayout\";\nimport * as treeToolbar from \"./views/treetoolbar\";\nimport * as toggle from \"./views/toggle\";\nimport * as toolbar from \"./views/toolbar\";\nimport * as tree from \"./views/tree\";\nimport * as up from \"./views/up\";\n\nexport function init(view, config){\n\tview.structure = {\n\t\t\"mainLayout\": mainLayout.init(view),\n\t\t\"toolbar\": toolbar.init(view),\n\t\t\"menu\": menu.init(view),\n\t\t\"back\": back.init(view),\n\t\t\"forward\": forward.init(view),\n\t\t\"up\": up.init(view),\n\t\t\"path\": path.init(view),\n\t\t\"search\": search.init(view),\n\t\t\"bodyLayout\": bodyLayout.init(view),\n\t\t\"treeLayout\": treeLayout.init(view),\n\t\t\"sidePanel\": sidePanel.init(view),\n\t\t\"treeToolbar\": treeToolbar.init(view),\n\t\t\"showTree\": toggle.init(view),\n\t\t\"hideTree\": toggle.init(view),\n\t\t\"expandAll\": expand.init(view),\n\t\t\"collapseAll\": collapse.init(view),\n\t\t\"tree\": tree.init(view),\n\t\t\"modeViews\":{\n\t\t\tconfig: function(settings){\n\t\t\t\treturn modeViews.init(view,settings);\n\t\t\t}\n\t\t},\n\t\t\"modes\":{\n\t\t\tconfig:function(settings){\n\t\t\t\treturn modes.init(view,settings);\n\t\t\t}\n\t\t},\n\t\t\"files\": {\n\t\t\tconfig: files.init(view)\n\t\t},\n\n\t\t\"table\": {\n\t\t\tconfig: table.init(view)\n\t\t},\n\t\t\"columns\": {\n\t\t\tconfig: columns.init(view)\n\t\t}\n\t};\n\n\tchangeStructure(view, config);\n}\n\n\nexport function getViews(view, struct, config){\n\tvar cells, found, i, id,\n\t\tarrName = \"\",\n\t\tarrs = [\"rows\",\"cols\",\"elements\",\"cells\",\"columns\",\"options\",\"data\"];\n\n\tfor(i =0; i< arrs.length;i++){\n\t\tif(struct[arrs[i]]){\n\t\t\tarrName = arrs[i];\n\t\t\tcells = struct[arrName];\n\t\t}\n\t}\n\tif(cells){\n\t\tif(typeof(cells) == \"string\"){\n\t\t\tif(view.structure[cells]){\n\t\t\t\tstruct[arrName] = getCellConfig(view, view.structure[cells],config);\n\t\t\t\tcells = struct[arrName];\n\t\t\t}\n\t\t}\n\n\t\tfor(i=0; i< cells.length;i++){\n\t\t\tfound = null;\n\t\t\tif(typeof(cells[i]) == \"string\"){\n\t\t\t\tfound = id = cells[i];\n\t\t\t\tif(view.structure[id]){\n\t\t\t\t\tcells[i] = getCellConfig(view, webix.extend({},view.structure[id]),config);\n\t\t\t\t\tcells[i].id = id;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tcells[i] = { };\n\t\t\t}\n\t\t\tgetViews(view, cells[i], config);\n\t\t\tif (found){\n\t\t\t\tif(config.on && config.on.onViewInit){\n\t\t\t\t\tconfig.on.onViewInit.apply(this,[found,cells[i]]);\n\t\t\t\t}\n\t\t\t\twebix.callEvent(\"onViewInit\",[found,cells[i],this]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getCellConfig(view, defConfig, config){\n\tvar cellConfig = defConfig.config||defConfig;\n\treturn (typeof(cellConfig)==\"function\"?cellConfig.call(view,config):webix.copy(cellConfig));\n}\n\nfunction isSVG(){\n\treturn (typeof SVGRect != \"undefined\");\n}\n\nexport function getUI(view, config){\n\tvar layoutConf = view.structure.mainLayout;\n\tvar structure = webix.extend({},layoutConf.config || layoutConf);\n\tgetViews(view, structure, config);\n\n\tif(config.on && config.on.onViewInit){\n\t\tconfig.on.onViewInit.apply(view,[config.id||\"mainLayout\",structure]);\n\t}\n\twebix.callEvent(\"onViewInit\",[config.id||\"mainLayout\",structure,view]);\n\tif(!isSVG())\n\t\tconfig.css = config.css?config.css+\" webix_nosvg\":\"webix_nosvg\";\n\treturn structure;\n}\n\nfunction changeStructure(view, config){\n\tvar newView, vName,\n\t\tnewViews = config.structure;\n\n\tif(newViews){\n\t\tfor(vName in newViews){\n\t\t\tif(newViews.hasOwnProperty(vName)){\n\t\t\t\tnewView = webix.copy(newViews[vName]);\n\t\t\t\tif(view.structure[vName] && view.structure[vName].config){\n\t\t\t\t\tview.structure[vName].config = newView.config||newView;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tview.structure[vName] = newView.config||newView;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","export function init(view){\n\tvar locale =  webix.i18n.filemanager;\n\treturn [\n\t\t{ id:\"value\",\theader: locale.name, fillspace:3, sort: \"string\", template: function(obj,common){\n\t\t\tvar name = common.templateName(obj,common);\n\t\t\treturn common.templateIcon(obj,common)+name;\n\t\t}, editor: \"text\"},\n\t\t{ id:\"date\",\theader: locale.date, fillspace:2, sort: \"int\", template: function(obj,common){\n\t\t\treturn common.templateDate(obj,common);\n\t\t}},\n\t\t{ id:\"type\",\theader: locale.type, fillspace:1, sort: \"string\", template: function(obj,common){\n\t\t\treturn common.templateType(obj);\n\t\t}},\n\t\t{ id:\"size\",\theader: locale.size, fillspace:1, sort: \"int\", css:{\"text-align\":\"right\"}, template: function(obj,common){\n\t\t\treturn obj.type==\"folder\"?\"\":common.templateSize(obj);\n\t\t}},\n\t\t{ id:\"location\",\theader: locale.location, fillspace:2, sort: \"string\", template: function(obj){\n\t\t\treturn view._getLocation(obj);\n\t\t},hidden:true}\n\t];\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_collapse\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30, tooltip: webix.i18n.filemanager.collapseTree\n\t};\n}\n\nfunction ready(view){\n\tif(view._getDynMode() && view.$$(\"collapseAll\")){\n\t\tview.$$(\"collapseAll\").hide();\n\t}\n\tif(view.$$(\"collapseAll\") && view.$$(\"tree\")){\n\t\tview.$$(\"collapseAll\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.$$(\"tree\").closeAll();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_expand\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\ttooltip: webix.i18n.filemanager.expandTree\n\t};\n}\n\nfunction ready(view){\n\tif(view._getDynMode() && view.$$(\"expandAll\")){\n\t\tview.$$(\"expandAll\").hide();\n\t}\n\tif(view.$$(\"expandAll\") && view.$$(\"tree\")){\n\t\tview.$$(\"expandAll\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.$$(\"tree\").openAll();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn {\n\t\thidden:true,\n\t\tcss:\"webix_fmanager_panel\",\n\t\ttype: \"clean\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: 34,\n\t\t\t\tpaddingY:1,\n\t\t\t\tpaddingX:0,\n\t\t\t\tview: \"form\",\n\t\t\t\tcols:[\n\t\t\t\t\t{ view: \"button\", id: \"showTree\", type:\"htmlbutton\", css: \"webix_fmanager_toggle\",\n\t\t\t\t\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\t\t\t\t\ttooltip: webix.i18n.filemanager.showTree\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ template:\" \"}\n\t\t]\n\t};\n}\nfunction ready(view){\n\tif(view.$$(\"showTree\")){\n\t\tview.$$(\"showTree\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.showTree();\n\t\t});\n\t}\n}\n","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"search\", gravity: 0.3, minWidth: 80, css: \"webix_fmanager_search\", icon:\" webix_fmanager_icon\" };\n}\n\nfunction ready(view){\n\tvar search = view.$$(\"search\");\n\tif(search){\n\t\tview.attachEvent(\"onHideSearchResults\", function(){\n\t\t\tsearch.setValue(\"\");\n\t\t});\n\t\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\t\tif(view.$searchResults){\n\t\t\t\tview.hideSearchResults(true);\n\t\t\t}\n\t\t});\n\t\tsearch.attachEvent(\"onTimedKeyPress\",  function(){\n\t\t\tif(this._code != 9){\n\t\t\t\tvar value = search.getValue();\n\t\t\t\tif(value){\n\t\t\t\t\tif(view.callEvent(\"onBeforeSearch\", [value])){\n\t\t\t\t\t\tview.showSearchResults(value);\n\t\t\t\t\t\tview.callEvent(\"onAfterSearch\", [value]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(view.$searchResults){\n\t\t\t\t\tview.hideSearchResults();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\t\tsearch.attachEvent(\"onKeyPress\",  function(code){\n\t\t\tthis._code = code;\n\t\t});\n\n\t\tview.attachEvent(\"onAfterModeChange\",function(){\n\t\t\tif(view.$searchResults)\n\t\t\t\tview.showSearchResults(search.getValue());\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"path\", borderless: true};\n}\n\nfunction ready(view){\n\tif(view.$$(\"path\")){\n\t\tview.attachEvent(\"onFolderSelect\",function(id){\n\t\t\tview.$$(\"path\").setValue(view.getPathNames(id));\n\t\t});\n\t\tview.$$(\"path\").attachEvent(\"onItemClick\",function(id){\n\t\t\tvar targetIndex = view.$$(\"path\").getIndexById(id);\n\t\t\tvar levelUp = view.$$(\"path\").count()-targetIndex-1;\n\n\t\t\tif(view.$searchResults)\n\t\t\t\tview.hideSearchResults();\n\n\t\t\tif(levelUp){\n\t\t\t\tid = view.getCursor();\n\t\t\t\twhile(levelUp){\n\t\t\t\t\tid = view.getParentId(id);\n\t\t\t\t\tlevelUp--;\n\t\t\t\t}\n\t\t\t\tview.setCursor(id);\n\t\t\t}\n\t\t\tview.callEvent(\"onAfterPathClick\",[id]);\n\t\t});\n\n\t\tview.data.attachEvent(\"onClearAll\",function(){\n\t\t\tview.$$(\"path\").clearAll();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_up\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.levelUp\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"up\")){\n\t\tview.$$(\"up\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeLevelUp\", [])){\n\t\t\t\tview.levelUp();\n\t\t\t\tview.callEvent(\"onAfterLevelUp\", []);\n\t\t\t}\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_forward\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.forward\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"forward\")){\n\t\tview.$$(\"forward\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeForward\", [])){\n\t\t\t\tview.goForward();\n\t\t\t\tview.callEvent(\"onAfterForward\", []);\n\t\t\t}\n\t\t});\n\t\tview.attachEvent(\"onHistoryChange\", function(path, ids, cursor){\n\t\t\tif(ids.length ==1 || cursor == ids.length-1)\n\t\t\t\tview.$$(\"forward\").disable();\n\t\t\telse\n\t\t\t\tview.$$(\"forward\").enable();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_back\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.back\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"back\")){\n\t\tview.$$(\"back\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeBack\", [])){\n\t\t\t\tview.goBack();\n\t\t\t\tview.callEvent(\"onAfterBack\", []);\n\t\t\t}\n\t\t});\n\t\tview.attachEvent(\"onHistoryChange\", function(path, ids, cursor){\n\t\t\tif(!cursor)\n\t\t\t\tview.$$(\"back\").disable();\n\t\t\telse\n\t\t\t\tview.$$(\"back\").enable();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn { view: \"button\", type:\"htmlbutton\", label: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\",\n\t\tcss: \"webix_fmanager_menu\", icon: \"bars\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.actions\n\t};\n}\n\nfunction ready(view){\n\tvar btn = view.$$(\"menu\");\n\tif(btn){\n\t\tbtn.attachEvent(\"onItemClick\",  function(){\n\t\t\tif(view.callEvent(\"onBeforeMenu\", [])){\n\t\t\t\tview.getMenu().setContext({obj: view.getActiveView(), id: view.getActive()});\n\t\t\t\tview.getMenu().show(btn.$view);\n\t\t\t\tview.callEvent(\"onAfterMenu\", []);\n\t\t\t}\n\t\t});\n\n\t\tif(view.config.readonly){\n\t\t\tbtn.hide();\n\t\t\tif(view.$$(\"menuSpacer\"))\n\t\t\t\tview.$$(\"menuSpacer\").hide();\n\t\t}\n\t}\n}\n","export function init(){\n\tvar config = {\n\t\ttype: \"clean\",\n\t\trows:[\n\t\t\t\"toolbar\",\n\t\t\t\"bodyLayout\"\n\t\t]\n\t};\n\tif(typeof SVGRect == \"undefined\")\n\t\tconfig.css = \"webix_nosvg\";\n\treturn config;\n}","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_toolbar\",\n\t\tpaddingX: 10,\n\t\tpaddingY:5,\n\t\tmargin: 7,\n\t\tcols:[\n\t\t\t\"menu\",\n\t\t\t{id: \"menuSpacer\", width: 75},\n\t\t\t{margin:0, cols:[\"back\",\"forward\"]},\"up\",\n\t\t\t\"path\",\"search\",\"modes\"\n\t\t]\n\t};\n}","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_body\",\n\t\tcols:[\n\t\t\t\"sidePanel\",\n\t\t\t\"treeLayout\",\n\t\t\t{view:\"resizer\", id: \"resizer\", width:3},\n\t\t\t\"modeViews\"\n\t\t]\n\t};\n}","export function init(){\n\treturn {\n\t\trows:[\n\t\t\t\"treeToolbar\",\n\t\t\t\"tree\"\n\t\t]\n\t};\n}","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_tree_toolbar\",\n\t\theight: 34,\n\t\tpaddingX: 8,\n\t\tpaddingY:1,\n\t\tmargin: 7,\n\t\tcols:[\n\t\t\t\"hideTree\",\n\t\t\t{id: \"treeSpacer\"},\n\t\t\t\"expandAll\",\"collapseAll\"\n\t\t]\n\t};\n}","export function init(view,settings){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar config = { view: \"segmented\", width: 70, options: [\n\t\t{\n\t\t\tid: \"files\",\n\t\t\twidth: 32,\n\t\t\tvalue: \"<div class=\\\"webix_fmanager_bar_icon webix_fmanager_files_mode \\\"></div>\",\n\t\t\ttooltip: webix.i18n.filemanager.iconsView\n\t\t},\n\t\t{\n\t\t\tid: \"table\",\n\t\t\twidth: 32,\n\t\t\tvalue: \"<div class=\\\"webix_fmanager_bar_icon webix_fmanager_table_mode \\\"></div>\",\n\t\t\ttooltip:webix.i18n.filemanager.tableView\n\t\t}\n\t], css:\"webix_fmanager_modes\", value: settings.mode};\n\n\treturn config;\n}\n\nfunction ready(view){\n\tif(view.$$(\"modes\")){\n\t\tview.$$(\"modes\").attachEvent(\"onBeforeTabClick\",function(id){\n\t\t\tvar value = view.$$(\"modes\").getValue();\n\t\t\tif(view.callEvent(\"onBeforeModeChange\",[value,id])){\n\t\t\t\tif(view.$$(id)){\n\t\t\t\t\tview.config.mode = id;\n\t\t\t\t\tview.$$(id).show();\n\t\t\t\t\tview.callEvent(\"onAfterModeChange\",[value,id]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n}","export function init(){\n\treturn {\n\t\tview: \"fileview\",\n\t\ttype: \"FileView\",\n\t\tselect: \"multiselect\",\n\t\teditable:true,\n\t\teditaction: false,\n\t\teditor:\"text\",\n\t\teditValue:\"value\",\n\t\tdrag: true,\n\t\tnavigation: true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\n","import * as save from \"../save.js\";\n\nfunction getConfig(legacy){\n\tvar config = {};\n\tif (legacy){\n\t\tconfig = {\n\t\t\tview: \"uploader\",\n\t\t\tcss: \"webix_upload_select_ie\",\n\t\t\ttype: \"iconButton\",\n\t\t\ticon:\"check\",\n\t\t\tlabel: webix.i18n.filemanager.select,\n\t\t\tformData:{ action:\"upload\" },\n\t\t\turlData:{}\n\t\t};\n\t}\n\telse{\n\t\tconfig = {\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\tformData:{ action:\"upload\" },\n\t\t\turlData:{}\n\t\t};\n\t}\n\treturn config;\n}\n\nexport function init(view){\n\tvar legacy = view.config.legacyUploader;\n\tvar config = getConfig(legacy);\n\n\tif(config){\n\t\tif (legacy){\n\t\t\tcreateFlashUploader(view, webix.copy(config));\n\t\t}\n\t\telse{\n\t\t\tview._uploader = webix.ui(config);\n\t\t\tview.attachEvent(\"onDestruct\", function(){\n\t\t\t\tview._uploader.destructor();\n\t\t\t});\n\t\t}\n\t}\n\tsetUploadHandlers(view);\n}\n\n\n\nfunction setUploadHandlers(view){\n\tvar uploader = getUploader(view);\n\tif(uploader){\n\t\t// define url\n\t\tuploader.config.upload = view.config.handlers.upload;\n\t\t// add drop areas\n\t\tvar modes = view.config.modes;\n\t\tif(modes && !view.config.readonly){\n\t\t\tfor(var i =0; i < modes.length; i++){\n\t\t\t\tif(view.$$(modes[i]))\n\t\t\t\t\tuploader.addDropZone(view.$$(modes[i]).$view);\n\t\t\t}\n\t\t}\n\n\t\t// handlers\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",function(file){\n\t\t\tvar target = \"\"+getUploadFolder(view);\n\n\t\t\tuploader.config.formData.target = target;\n\t\t\tuploader.config.urlData.target = target;\n\t\t\t//reset upload script each time, so we can be sure that active config is used\n\t\t\tuploader.config.upload = view.config.handlers.upload;\n\n\t\t\treturn view.callEvent(\"onBeforeFileUpload\",[file]);\n\t\t});\n\t\tuploader.attachEvent(\"onAfterFileAdd\", function(file){\n\t\t\tview._uploaderFolder = null;\n\t\t\tfile.oldId = file.id;\n\t\t\tview.add({\n\t\t\t\t\"id\"   : file.id,\n\t\t\t\t\"value\": file.name,\n\t\t\t\t\"type\" : file.type,\n\t\t\t\tsize   : file.size,\n\t\t\t\tdate   : Math.round((new Date()).valueOf()/1000)\n\t\t\t}, -1, uploader.config.formData.target);\n\n\t\t\tif(view.config.uploadProgress){\n\t\t\t\tview.showProgress(view.config.uploadProgress);\n\t\t\t}\n\t\t\tview._refreshActiveFolder();\n\t\t});\n\n\t\tuploader.attachEvent(\"onUploadComplete\",function(file){\n\t\t\tif(view._uploadPopup){\n\t\t\t\tview.getMenu().hide();\n\t\t\t\tview._uploadPopup.hide();\n\t\t\t}\n\t\t\tview.hideProgress();\n\t\t\tview.callEvent(\"onAfterFileUpload\",[file]);\n\t\t});\n\t\tuploader.attachEvent(\"onFileUpload\",function(item){\n\t\t\tif(item.oldId)\n\t\t\t\tview.data.changeId(item.oldId,item.id);\n\t\t\tif(item.value)\n\t\t\t\tview.getItem(item.id).value = item.value;\n\n\t\t\tview.getItem(item.id).type = item.type;\n\t\t\tview._refreshActiveFolder();\n\t\t});\n\t\tuploader.attachEvent(\"onFileUploadError\",function(item, response){\n\t\t\tsave.errorHandler(view, response);\n\t\t\tview.hideProgress();\n\n\t\t});\n\t}\n}\n\nfunction createFlashUploader(view, config){\n\tif(!config){\n\t\tconfig = getConfig(view.config.legacyUploader);\n\t}\n\tview._uploadPopup = webix.ui({\n\t\tview:\"popup\",\n\t\tpadding:0,\n\t\twidth:250,\n\t\tbody: config\n\t});\n\tview._uploader = view._uploadPopup.getBody();\n\tview.attachEvent(\"onDestruct\", function(){\n\t\tview._uploadPopup.destructor();\n\t});\n}\n\nfunction getUploadFolder(view){\n\treturn \tview._uploaderFolder||view.getCursor();\n}\n\nexport function getUploader(view){\n\treturn \tview._uploader;\n}\n\nexport function uploadFile(view,id,e){\n\n\tif(!view.data.branch[id] && view.getItem(id).type != \"folder\"){\n\t\tid = view.getParentId(id);\n\t}\n\n\tview._uploaderFolder = id;\n\tif(view._uploadPopup){\n\t\tview._uploadPopup.destructor();\n\t\tcreateFlashUploader(view);\n\t\tsetUploadHandlers(view);\n\t\tview._uploadPopup.show(e,{x:20,y:5});\n\t}\n\telse{\n\t\tif(view._uploader)\n\t\t\tview._uploader.fileDialog();\n\t}\n}","import \"./types\";\nimport \"./locale\";\nimport \"./widgets\";\n\nimport * as context from \"./views/actions\";\nimport * as defaults from \"./defaults\";\nimport * as history from \"./history\";\nimport * as loader from \"./load\";\nimport * as path from \"./path\";\nimport * as save from \"./save\";\nimport * as tree from \"./tree\";\nimport * as ui from \"./ui\";\nimport * as uploader from \"./views/upload\";\n\n\nwebix.protoUI({\n\tname:\"filemanager\",\n\t$init: function(config) {\n\t\tthis.$view.className += \" webix_fmanager\";\n\t\twebix.extend(this.data, webix.TreeStore, true);\n\t\tthis.data.provideApi(this,true);\n\t\twebix.extend(config,this.defaults);\n\t\tui.init(this,config);\n\t\thistory.init(this);\n\t\tloader.init(this);\n\n\t\tconfig.legacyUploader = config.legacyUploader || webix.isUndefined(XMLHttpRequest) || webix.isUndefined((new XMLHttpRequest()).upload);\n\n\t\tthis.$ready.push(()=>{\n\t\t\tthis._beforeInit();\n\t\t\tthis.callEvent(\"onComponentInit\",[]);\n\t\t});\n\t\twebix.UIManager.tabControl = true;\n\t\twebix.extend(config, ui.getUI(this,config));\n\n\t\tthis.attachEvent(\"onAfterLoad\",function(){\n\t\t\t// default cursor\n\t\t\tif(!this.getCursor || !this.getCursor()){\n\t\t\t\tvar selection =  this.config.defaultSelection;\n\t\t\t\tselection = selection?selection.call(this):this.getFirstChildId(0);\n\t\t\t\tif(this.setCursor)\n\t\t\t\t\tthis.setCursor(selection);\n\t\t\t\telse //data:[], binding is not yet applied\n\t\t\t\t\tthis.attachEvent(\"onComponentInit\", ()=>{\n\t\t\t\t\t\tthis.setCursor(selection);\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\thandlers_setter: function(handlers){\n\t\tfor(var h in handlers){\n\t\t\tvar url = handlers[h];\n\t\t\tif (typeof url == \"string\"){\n\t\t\t\tif(url.indexOf(\"->\") != -1){\n\t\t\t\t\tvar parts = url.split(\"->\");\n\t\t\t\t\turl = webix.proxy(parts[0], parts[1]);\n\t\t\t\t}\n\t\t\t\telse if(h != \"upload\" && h != \"download\")\n\t\t\t\t\turl = webix.proxy(\"post\", url);\n\t\t\t}\n\t\t\thandlers[h] = url;\n\t\t}\n\t\treturn handlers;\n\t},\n\t_beforeInit: function(){\n\t\tcontext.init(this);\n\t\tuploader.init(this);\n\n\t\t// folder type definition\n\t\tif(!this.config.scheme)\n\t\t\tthis.define(\"scheme\", {\n\t\t\t\tinit:function (obj) {\n\t\t\t\t\tvar item = this.getItem(obj.id);\n\t\t\t\t\tif (item && item.$count) {\n\t\t\t\t\t\tobj.type = \"folder\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.attachEvent(\"onFolderSelect\", function(id){\n\t\t\tthis.setCursor(id);\n\t\t});\n\n\t\tthis.attachEvent(\"onBeforeDragIn\",function(context){\n\t\t\tvar target = context.target;\n\t\t\tif(target){\n\t\t\t\tvar ids = context.source;\n\t\t\t\tfor(var i=0; i < ids.length; i++){\n\t\t\t\t\twhile(target){\n\t\t\t\t\t\tif(target==ids[i]){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget = this._getParentId(target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t},\n\t_getParentId: function(id){\n\t\tif(!this.getItem(id)){\n\t\t\tvar activeView = this.$$(this.config.mode);\n\t\t\tvar item = activeView.getItem(id);\n\t\t\tif(item && item.parent && this.getItem(item.parent)){\n\t\t\t\treturn item.parent;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\treturn webix.TreeStore.getParentId.apply(this,arguments);\n\t},\n\tgetMenu: function(){\n\t\treturn this._contextMenu;\n\t},\n\tgetPath: function(id){\n\t\treturn path.getPath(this,id);\n\t},\n\tgetPathNames: function(id){\n\t\treturn path.getPathNames(this,id);\n\t},\n\tsetPath: function(id){\n\t\treturn path.setPath(this,id);\n\t},\n\t_getLocation: function(obj){\n\t\tvar location = \"\", path;\n\t\tif(this.getItem(obj.id) || obj.parent && this.getItem(obj.parent)){\n\t\t\tif(obj.parent){\n\t\t\t\tpath = this.getPathNames(obj.parent);\n\t\t\t\tpath.shift();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpath = this.getPathNames(obj.id);\n\t\t\t\tpath.shift();\n\t\t\t\tpath.pop();\n\t\t\t}\n\t\t\tvar names = [];\n\t\t\tfor(var i=0; i < path.length;i++){\n\t\t\t\tnames.push(path[i].value);\n\t\t\t}\n\t\t\tlocation = \"/\"+names.join(\"/\");\n\t\t}\n\t\telse if(obj.location){\n\t\t\tlocation = obj.location;\n\t\t}\n\t\telse if(typeof obj.id == \"string\"){\n\t\t\tvar parts = obj.id.split(\"/\");\n\t\t\tparts.pop();\n\t\t\tlocation = \"/\"+parts.join(\"/\");\n\t\t}\n\t\treturn location;\n\t},\n\tgetSearchData: function(id,value){\n\t\tvar found = [];\n\t\tthis.data.each(function(obj){\n\t\t\tvar text = this.config.templateName(obj);\n\t\t\tif(text.toLowerCase().indexOf(value.toLowerCase())>=0){\n\t\t\t\tfound.push(webix.copy(obj));\n\t\t\t}\n\t\t},this,true,id);\n\t\treturn found;\n\t},\n\tshowSearchResults: function(value){\n\t\tvar id = this.getCursor();\n\t\tif(this.config.handlers.search){\n\t\t\tloader.loadSearchData(this,this.config.handlers.search, id, value);\n\t\t}\n\t\telse{\n\t\t\tvar data = \tthis.getSearchData(id, value);\n\t\t\tloader.parseSearchData(this,data);\n\t\t}\n\t},\n\thideSearchResults: function(skipRefresh){\n\t\tif(this.$searchResults){\n\t\t\tthis.callEvent(\"onHideSearchResults\",[]);\n\t\t\tthis.$searchResults = false;\n\t\t\t// refresh cursor\n\t\t\tif(!skipRefresh){\n\t\t\t\tvar id = this.getCursor();\n\t\t\t\tthis.blockEvent();\n\t\t\t\tthis.setCursor(null);\n\t\t\t\tthis.unblockEvent();\n\t\t\t\tthis.setCursor(id);\n\t\t\t}\n\t\t}\n\t},\n\tgoBack: function(step){\n\t\tstep = (step?(-1)*Math.abs(step):-1);\n\t\treturn history.changeCursor(this, step);\n\t},\n\tgoForward: function(step){\n\t\treturn history.changeCursor(this, step||1);\n\t},\n\tlevelUp: function(id){\n\t\tid = id||this.getCursor();\n\t\tif(id){\n\t\t\tid = this.getParentId(id);\n\t\t\tthis.setCursor(id);\n\t\t}\n\t},\n\tmarkCopy: function(ids){\n\t\tif(ids){\n\t\t\tif(!webix.isArray(ids)){\n\t\t\t\tids = [ids];\n\t\t\t}\n\t\t\tthis._moveData = ids;\n\t\t\tthis._copyFiles = true;\n\t\t}\n\t},\n\tmarkCut: function(ids){\n\t\tif(ids){\n\t\t\tif(!webix.isArray(ids)){\n\t\t\t\tids = [ids];\n\t\t\t}\n\t\t\tthis._moveData = ids;\n\t\t\tthis._copyFiles = false;\n\t\t}\n\t},\n\tpasteFile: function(id){\n\t\tif(webix.isArray(id)){\n\t\t\tid = id[0];\n\t\t}\n\t\tif(id){\n\t\t\tid = id.toString();\n\t\t\tvar activeItem = this.getActiveView().getItem(id);\n\t\t\tif(this.data.branch[id]&&this.getItem(id).type == \"folder\" || activeItem && activeItem.type == \"folder\"){\n\t\t\t\tif(this._moveData){\n\t\t\t\t\tif(this._copyFiles){\n\t\t\t\t\t\tthis.copyFile(this._moveData,id);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.moveFile(this._moveData,id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tdownload:function(id){\n\t\tvar url = this.config.handlers.download;\n\t\tif (url)\n\t\t\twebix.send(url, { action:\"download\", source: id });\n\t},\n\tfileExists: function(name,target,id){\n\t\tvar result = false;\n\t\tthis.data.eachChild(target, webix.bind(function(obj){\n\t\t\tif(name == obj.value&&!(id && obj.id==id)){\n\t\t\t\tresult = obj.id;\n\t\t\t}\n\t\t},this));\n\t\treturn result;\n\t},\n\t_refreshActiveFolder: function(){\n\t\tthis.$skipDynLoading = true;\n\t\tthis.$$(this.config.mode).$skipBinding = false;\n\t\tthis.refreshCursor();\n\t},\n\t_setFSId: function(item){\n\t\tvar newId = this.getParentId(item.id)+\"/\"+item.value;\n\t\tif(item.id != newId)\n\t\t\tthis.data.changeId( item.id, newId );\n\t},\n\t_changeChildIds: function(id){\n\t\tthis.data.eachSubItem(id,webix.bind(function(item){\n\t\t\tif(item.value)\n\t\t\t\tthis._setFSId(item);\n\t\t},this));\n\t},\n\t_callbackRename: function(id, value){\n\t\tvar item = this.getItem(id);\n\t\tif(item.value != value){\n\t\t\titem.value = value;\n\t\t\tthis.$$(\"tree\").updateItem(id, { value });\n\t\t\tthis._refreshActiveFolder();\n\t\t\tthis.callEvent(\"onItemRename\", [id]);\n\t\t}\n\t},\n\t_moveFile: function(source,target,copy){\n\t\tvar action = (copy?\"copy\":\"move\"),\n\t\t\tids = [];\n\t\tsource.reverse();\n\t\tfor(var i=0; i<source.length; i++){\n\t\t\tif(this.getItem(source[i])){\n\t\t\t\tvar newId = this.move(source[i],0,this,{parent:target,copy:copy?true:false});\n\t\t\t\tids.push(newId);\n\t\t\t}\n\t\t}\n\n\t\tthis._refreshActiveFolder();\n\t\tvar url = this.config.handlers[action];\n\t\tif (url){\n\t\t\tsave.makeSaveRequest(this, url,{ action: action, source:source.join(\",\"), temp: ids.join(\",\"), target: target.toString() },function(requestData,responseData){\n\t\t\t\tif(responseData && webix.isArray(responseData)){\n\t\t\t\t\tvar ids = requestData.temp.split(\",\");\n\t\t\t\t\tfor(var i=0;i < responseData.length;i++){\n\t\t\t\t\t\tif(responseData[i].id && (responseData[i].id!=ids[i]) && this.data.pull[ids[i]]){\n\t\t\t\t\t\t\tthis.data.changeId(ids[i],responseData[i].id);\n\t\t\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\t\t\tthis._changeChildIds(responseData[i].id);\n\t\t\t\t\t\t\tif(responseData[i].value){\n\t\t\t\t\t\t\t\tthis._callbackRename(responseData[i].id,responseData[i].value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._updateDynSearch();\n\t\t\t});\n\t\t}\n\t},\n\t_updateDynSearch: function(){\n\t\tif(this.$searchResults && this.$searchValue){\n\t\t\tthis.showSearchResults(this.$searchValue);\n\t\t}\n\t},\n\tcopyFile: function(source, target){\n\t\tthis.moveFile(source, target, true);\n\t},\n\tmoveFile:function(source, target, copy){\n\t\tvar i, id, result;\n\t\tif(typeof(source) == \"string\"){\n\t\t\tsource = source.split(\",\");\n\t\t}\n\t\tif(!webix.isArray(source)){\n\t\t\tsource = [source];\n\t\t}\n\t\tif(!target){\n\t\t\ttarget = this.getCursor();\n\t\t}\n\t\telse if(!this.data.branch[target]&&this.getItem(target.toString()).type!=\"folder\"){\n\t\t\ttarget = this.getParentId(target);\n\t\t}\n\n\t\tresult = true;\n\t\ttarget = target.toString();\n\n\t\tfor(i=0; i<source.length; i++){\n\t\t\tid = source[i].toString();\n\t\t\tresult = result&&this._isMovingAllowed(id,target);\n\n\t\t}\n\t\tif(result){\n\t\t\tthis._moveFile(source,target,copy?true:false);\n\t\t}\n\t\telse{\n\t\t\tthis.callEvent(copy?\"onCopyError\":\"onMoveError\", []);\n\t\t}\n\t},\n\tdeleteFile:function(ids,callback){\n\t\tif(typeof(ids) == \"string\"){\n\t\t\tids = ids.split(\",\");\n\t\t}\n\t\tif(!webix.isArray(ids)){\n\t\t\tids = [ids];\n\t\t}\n\t\tfor(var i=0; i<ids.length; i++){\n\t\t\tvar id = ids[i];\n\t\t\tif(this.$$(this.config.mode).isSelected(id))\n\t\t\t\tthis.$$(this.config.mode).unselect(id);\n\t\t\tif(id == this.getCursor())\n\t\t\t\tthis.setCursor(this.getFirstId());\n\t\t\tif(id)\n\t\t\t\tthis.remove(id);\n\t\t}\n\t\tthis._refreshActiveFolder();\n\n\t\tvar url = this.config.handlers.remove;\n\t\tif (url){\n\t\t\tif(callback)\n\t\t\t\tcallback = webix.bind(callback,this);\n\t\t\tsave.makeSaveRequest(this, url,{ action:\"remove\", source:ids.join(\",\") }, callback);\n\t\t}\n\t\telse if(callback){\n\t\t\tcallback.call(this);\n\t\t}\n\n\t},\n\t_createFolder: function(obj,target){\n\t\tthis.add(obj, 0, target);\n\t\tobj.source = obj.value;\n\t\tobj.target = target;\n\t\tthis._refreshActiveFolder();\n\t\tvar url = this.config.handlers.create;\n\t\tif (url){\n\t\t\tobj.action = \"create\";\n\t\t\tsave.makeSaveRequest(this, url,obj,function(requestData,responseData){\n\t\t\t\tif(responseData.id){\n\t\t\t\t\tif(requestData.id != responseData.id)\n\t\t\t\t\t\tthis.data.changeId(requestData.id,responseData.id);\n\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\tthis._changeChildIds(responseData.id);\n\t\t\t\t\tif(responseData.value){\n\t\t\t\t\t\tthis._callbackRename(responseData.id,responseData.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tcreateFolder: function(target){\n\t\tif(typeof(target) == \"string\"){\n\t\t\ttarget = target.split(\",\");\n\t\t}\n\t\tif(webix.isArray(target)){\n\t\t\ttarget = target[0];\n\t\t}\n\t\tif(target){\n\t\t\ttarget = \"\"+target;\n\t\t\tvar item = this.getItem(target);\n\t\t\tif(!this.data.branch[target] && (item.type != \"folder\")){\n\t\t\t\ttarget = this.getParentId(target);\n\t\t\t}\n\t\t\tvar obj = this.config.templateCreate(item);\n\n\t\t\ttarget = \"\"+target;\n\t\t\tthis._createFolder(obj,target);\n\t\t}\n\t},\n\teditFile: function(id){\n\t\tif(webix.isArray(id)){\n\t\t\tid = id[0];\n\t\t}\n\t\tif(this.getActiveView()&&this.getActiveView().edit)\n\t\t\tthis.getActiveView().edit(id);\n\n\t},\n\trenameFile: function(id,name,field){\n\t\tvar item = this.getItem(id);\n\t\tfield = (field||\"value\");\n\t\tif(item)\n\t\t\titem[field] = name;\n\n\t\tthis.refresh(item ? id : \"\");\n\t\tthis._refreshActiveFolder();\n\t\tthis.callEvent(\"onFolderSelect\",[this.getCursor()]);\n\n\t\tvar url = this.config.handlers.rename;\n\t\tif (url){\n\t\t\tvar obj = { source:id, action:\"rename\", target: name};\n\t\t\tsave.makeSaveRequest(this, url,obj,function(requestData,responseData){\n\t\t\t\tif(responseData.id && this.getItem(requestData.source)){\n\t\t\t\t\tif(requestData.source != responseData.id)\n\t\t\t\t\t\tthis.data.changeId(requestData.source,responseData.id);\n\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\tthis._changeChildIds(responseData.id);\n\t\t\t\t\tif(responseData.value){\n\t\t\t\t\t\tthis._callbackRename(responseData.id,responseData.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._updateDynSearch();\n\t\t\t});\n\t\t}\n\t},\n\t_isMovingAllowed: function(source,target){\n\t\twhile(target){\n\t\t\tif(target==source || (!this.data.branch[target]&&this.getItem(target.toString()).type != \"folder\")){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ttarget = this.getParentId(target);\n\t\t}\n\t\treturn true;\n\t},\n\tgetActiveView: function(){\n\t\treturn this._activeView||this.$$(\"tree\")||null;\n\t},\n\tgetActive: function(){\n\t\tvar selected = this.getSelectedFile();\n\t\treturn selected?selected:this.getCursor();\n\t},\n\t/*\n\t * returns the name of the folder selected in Tree\n\t * */\n\tgetCurrentFolder: function(){\n\t\treturn this.$$(\"tree\").getSelectedId();\n\t},\n\t/*\n\t * returns a string or an array with selected file(folder) name(s)\n\t * */\n\tgetSelectedFile: function(){\n\t\tvar result = null,\n\t\t\tselected = this.$$(this.config.mode).getSelectedId();\n\n\t\tif(selected){\n\t\t\tif(!webix.isArray(selected))\n\t\t\t\tresult = selected.toString();\n\t\t\telse{\n\t\t\t\tresult = [];\n\t\t\t\tfor(var i=0; i < selected.length; i++){\n\t\t\t\t\tresult.push(selected[i].toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\t_openFolder: function(id){\n\t\tif(this.callEvent(\"onBeforeLevelDown\",[id])){\n\t\t\tthis.setCursor(id);\n\t\t\tthis.callEvent(\"onAfterLevelDown\",[id]);\n\t\t}\n\t},\n\t_runFile: function(id){\n\t\tif(this.callEvent(\"onBeforeRun\",[id])){\n\t\t\tthis.download(id);\n\t\t\tthis.callEvent(\"onAfterRun\",[id]);\n\t\t}\n\t},\n\t_onFileDblClick: function(id){\n\t\tid = id.toString();\n\t\tvar item = this.getItem(id);\n\t\tif(item) {\n\t\t\tif (this.data.branch[id] || (item.type == \"folder\"))\n\t\t\t\tthis._openFolder(id);\n\t\t\telse\n\t\t\t\tthis._runFile(id);\n\t\t} else{\n\t\t\t// dynamic loading\n\t\t\tif(this.$$(this.config.mode).filter){\n\t\t\t\titem = this.$$(this.config.mode).getItem(id);\n\t\t\t\tif(item.type != \"folder\"){\n\t\t\t\t\tthis._runFile(id);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar folders = item&&item.parents?item.parents:path.getParentFolders(id);\n\t\t\t\t\tif(folders.length){\n\t\t\t\t\t\tthis.openFolders(folders).then( webix.bind(function(){\n\t\t\t\t\t\t\tthis._openFolder(id);\n\t\t\t\t\t\t},this));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\topenFolders: function(folders){\n\t\treturn loader.openFolders(this, folders);\n\t},\n\t_addElementHotKey: function(key, func, view){\n\t\tvar keyCode = webix.UIManager.addHotKey(key, func, view);\n\t\t(view||this).attachEvent(\"onDestruct\", function(){\n\t\t\twebix.UIManager.removeHotKey(keyCode, func, view);\n\t\t});\n\t},\n\tclearBranch: function(id){\n\t\tloader.clearBranch(this,id);\n\t},\n\tparseData: function(data){\n\t\tloader.parseData(this,data);\n\t},\n\t_getDynMode: function(){\n\t\treturn loader.getDynMode(this);\n\t},\n\tloadDynData: function(url, obj, mode, open){\n\t\tloader.loadDynData(this, url, obj, mode, open);\n\t},\n\tgetUploader: function(){\n\t\treturn \tuploader.getUploader(this);\n\t},\n\tuploadFile: function(id,e){\n\t\treturn uploader.uploadFile(this,id,e);\n\t},\n\thideTree: function(){\n\t\tif(this.callEvent(\"onBeforeHideTree\",[])){\n\t\t\ttree.hideTree(this);\n\t\t\tthis.callEvent(\"onAfterHideTree\",[]);\n\t\t}\n\t},\n\tshowTree: function(){\n\t\tif(this.callEvent(\"onBeforeShowTree\",[])){\n\t\t\ttree.showTree(this);\n\t\t\tthis.callEvent(\"onAfterShowTree\",[]);\n\t\t}\n\t},\n\tdefaults: defaults.values\n},  webix.ProgressBar, webix.IdSpace, webix.ui.layout,webix.TreeDataMove, webix.TreeDataLoader, webix.DataLoader, webix.EventSystem, webix.Settings);\n\n"],"names":["init","view","attachEvent","menu","getMenu","id","e","obj","this","getItem","method","active","getActive","callEvent","event","config","legacyUploader","_uploadPopup","hide","args","webix","html","pos","push","delay","apply","filter","c","getContext","unselectAll","templateName","popup","width","padding","autofocus","css","template","common","name","icon","indexOf","data","batch","value","i18n","filemanager","copy","cut","paste","$template","create","remove","rename","upload","_contextMenu","ui","destructor","type","tree","dragTemplate","i","$level","webix_child_branch","$count","open","folder","dataview","height","margin","templateIcon","actions","back","forward","levelUp","size","date","location","select","sizeLabels","iconsView","tableView","hideTree","showTree","collapseTree","expandTree","saving","errorResponse","replaceConfirmation","createConfirmation","renameConfirmation","yes","no","types","doc","excel","pdf","pp","text","video","image","code","audio","archive","file","protoUI","EditAbility","list","ContextHelper","submenu","$dragHTML","item","ctx","DragControl","getTextSize","posView","offset","$view","x","x_offset","y_offset","index","getColumnIndex","columns","clientX","datatable","defaults","layout","separator","scroll","$skin","skin","$active","buttonHeight","inputHeight","$init","className","value_setter","setValue","values","clearAll","split","parse","getValue","serialize","modes","mode","handlers","structure","fsIds","templateSize","labels","pow","isInt","parseInt","Number","numToStr","decimalDelimiter","groupDelimiter","decimalSize","groupSize","format","templateType","templateDate","_typeof","Date","fullDateFormatStr","templateCreate","icons","uploadProgress","_cursorHistory","extend","PowerArray","$ready","disabledHistory","state","window","hash","setPath","replace","path","_historyIgnore","_historyCursor","splice","length","getCursor","history","replaceState","changeCursor","step","setCursor","sortData","sort","sorter","DataStore","prototype","sorting","folders","files","concat","$skipDynLoading","dataParser","noFileCache","clearBranch","webix_files","parseData","branch","webix_branch","items","eachChild","_refreshActiveFolder","openDynFolder","ids","defer","showProgress","url","callback","success","response","hideProgress","driver","toObject","call","lastId","shift","refreshCursor","resolve","load","action","source","getDynMode","parseSearchData","$searchResults","cell","$$","sortState","getParentFolders","parts","slice","join","makeSaveRequest","showSaveMessage","rCallback","_saveMessage","error","result","errorHandler","message","_saveMessageDate","style","position","insertBefore","msg","innerHTML","ajax","get","getDetails","getRecords","settings","mCell","show","unselect","editStop","addCellConfig","ready","animate","cells","oldId","newId","pull","changeId","$skipBinding","bind","target","loadDynData","getBranch","importData","_onFileDblClick","_addElementHotKey","getSelectedId","getFirstId","_activeView","removeCss","isVisible","addCss","editor","getTopParentView","row","column","renameFile","context","from","moveFile","readonly","sview","selected","UIManager","setFocus","id0","on_context","webix_view","locate","srcElement","setContext","preventEvent","attachTo","res","menuFilter","count","sel","found","isArray","exists","isSelected","toString","define","isColumnVisible","hideColumn","showColumn","edit","by","dir","as","showSearchResults","headerRowHeight","editable","editaction","drag","navigation","resizeColumn","tabFocus","onContext","label","tooltip","sync","on_click","webix_tree_child_branch","ev","getState","setState","showItem","hideSearchResults","refresh","isBranchOpen","close","getParentId","setTreeCursor","filterMode","showSubItems","openParents","locale","rows","SVGRect","paddingX","paddingY","cols","btn","getActiveView","goBack","cursor","enable","disable","goForward","getPathNames","targetIndex","getIndexById","borderless","search","_code","gravity","minWidth","hidden","toggle","_getDynMode","openAll","closeAll","modeViews","options","editValue","table","header","fillspace","_getLocation","newView","vName","newViews","hasOwnProperty","changeStructure","getCellConfig","defConfig","cellConfig","getUI","layoutConf","mainLayout","getViews","struct","arrName","arrs","on","onViewInit","getConfig","legacy","formData","urlData","apiOnly","setUploadHandlers","uploader","getUploader","addDropZone","_uploaderFolder","add","Math","round","valueOf","save","createFlashUploader","body","_uploader","getBody","TreeStore","provideApi","loader","isUndefined","XMLHttpRequest","_this","_beforeInit","tabControl","selection","defaultSelection","getFirstChildId","_this2","handlers_setter","h","proxy","scheme","_getParentId","arguments","parent","getPath","reverse"],"mappings":"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"}